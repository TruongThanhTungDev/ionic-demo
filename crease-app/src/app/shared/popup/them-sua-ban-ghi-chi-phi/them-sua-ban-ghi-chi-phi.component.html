<ion-header>
  <ion-toolbar mode="md" class="new-toolbar-background">
    <ion-buttons slot="start">
      <button class="bg-content rounded-circle" (click)="cancel()">
        <i class="fa-solid fa-arrow-left" style=" padding: 8px 8px;font-size:20px;margin-right: 6px;color: #2c5fb6"></i>
      </button>
    </ion-buttons>
    <ion-title class="text-14px fw-bold">{{ title }}</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="saveInfo()" [strong]="true">Lưu</ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>
<ion-content class="ion-padding">
  <div class="text-primary">
    <h5 class="fw-bold">Thông tin chi phí</h5>
    <div class="mb-3">
      <label for="name" style="top: 3px">
        Chi phí theo ngày
      </label>
      <input type="text" [(ngModel)]="costPerDay" class="form-control" disabled>
    </div>
    <div class="mb-3">
      <label for="name" style="top: 3px">
        Số ngày
      </label>
      <input type="text" [(ngModel)]="numOfDay" class="form-control" (change)="getCostByDay()" disabled>
    </div>
    <div class="mb-3" *ngIf="!checkMakerting">
      <label for="name" style="top: 3px">
        Số đơn
      </label>
      <input type="text" [(ngModel)]="numOfOrder" class="form-control" (change)="cost()">
    </div>
    <div class="mb-3" *ngIf="costPerOrder">
      <label for="name" style="top: 3px">
        Chi phí/đơn
      </label>
      <input type="text" [(ngModel)]="costPerOrderValue" class="form-control" (change)="cost()">
    </div>
    <div class="mb-3">
      <label for="name" style="top: 3px">
        Shop code
      </label>
      <select *ngIf="info.role !== 'admin'; else elseBlock" [(ngModel)]="shopCode" class="form-control">
        <option value="" selected>Chọn shop</option>
        <option *ngFor="let obj of shopList" [value]="obj.code">{{obj.code}}</option>
      </select>
      <ng-template #elseBlock>
        <input type="text" [(ngModel)]="shopCode" class="form-control" disabled>
      </ng-template>
    </div>
    <div class="mb-3" *ngIf="checkMakerting || type === 'edit'">
      <div class="row align-items-center">
        <div class="col-6">
          <label>Từ ngày</label>
          <input type="date" [(ngModel)]="dateRange.startDate" class="form-control text-primary" placeholder="Từ ngày"
            (change)="checkDate()">
        </div>
        <div class="col-6">
          <label>Đến ngày</label>
          <input type="date" [(ngModel)]="dateRange.endDate" class="form-control w-100 text-primary"
            style="margin-left: 4px" placeholder="Đến ngày" (change)="checkDate()">
        </div>
      </div>
    </div>
    <div class="mb-3">
      <label for="name" style="top: 3px">
        Tổng chi phí
      </label>
      <input type="text" onlyNumber [(ngModel)]="totalCost" class="form-control" id="name" [disabled]="costPerOrder"
        (change)="getCostByDay()">
    </div>
    <div class="mb-3">
      <label for="floatingSelect">Danh sách loại chi phí</label>
      <select [(ngModel)]="costType" class="form-select" id="floatingSelect" (change)="loadDataByCostPerOerDer()">
        <option value=""></option>
        <option *ngFor="let item of listCostType" [value]="item.id">{{ item.code }} - {{ item.name }}</option>
      </select>
    </div>
  </div>
  <ion-toast [isOpen]="isToastOpen" [message]="messageToast" [duration]="3000"
    (didDismiss)="setOpen(false)"></ion-toast>
</ion-content>